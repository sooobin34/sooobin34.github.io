{{ $item := .item }}
{{ $link := $item.RelPermalink }}
{{ $target := "" }}
{{ if $item.Params.external_link }}{{ $link = $item.Params.external_link }}{{ $target = "target=\"_blank\" rel=\"noopener\"" }}{{ end }}

{{ $summary := "" }}
{{ if $item.Params.summary }}{{ $summary = $item.Params.summary | markdownify | emojify }}
{{ else if $item.Params.abstract }}{{ $summary = $item.Params.abstract | markdownify | emojify | truncate (site.Params.abstract_length | default 120) }}
{{ else if $item.Summary }}{{ $summary = $item.Summary }}{{ end }}

<!-- USING CUSTOM OVERLAY -->
<div class="media stream-item overlay-card">
  <a class="overlay-img" href="{{ $link }}" {{ $target | safeHTMLAttr }}>
    {{ with $item.Params.image }}<img src="{{ .filename | relURL }}" alt="{{ $item.Title }}">{{ end }}
    <div class="overlay-text">
      <h3 class="overlay-title">{{ $item.Title }}</h3>
      {{ with $summary }}<p class="overlay-summary">{{ . }}</p>{{ end }}
    </div>
  </a>
</div>

<style>
.overlay-card{position:relative;border-radius:12px;overflow:hidden;box-shadow:0 4px 10px rgba(0,0,0,.08);transition:transform .25s,box-shadow .25s}
.overlay-card:hover{transform:translateY(-6px);box-shadow:0 8px 18px rgba(0,0,0,.15)}
.overlay-img{display:block;position:relative}
.overlay-img img{width:100%;height:220px;object-fit:cover;display:block;filter:brightness(72%);transition:filter .25s,transform .35s}
.overlay-card:hover .overlay-img img{filter:brightness(86%);transform:scale(1.03)}
.overlay-text{position:absolute;left:0;bottom:0;width:100%;padding:14px;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.55) 100%);color:#fff}
.overlay-title{margin:0 0 6px;font-size:1.05rem;line-height:1.25}
.overlay-summary{margin:0;font-size:.9rem;opacity:.95}
</style>
